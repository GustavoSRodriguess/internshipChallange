openModalButton.forEach(button => {
    button.addEventListener('click', () => {
        const modal = document.querySelector(button.dataset.modalTarget);
        const orderId = button.closest('tr').querySelector('td:first-child').innerText; // Get the order_id from the first column of the row
        fetch(`../controllers/orderItemController.php?orderId=${orderId}`)
            .then(res => res.json())
            .then(data => {
                // Fill modal with data
                const modalBody = modal.querySelector('.modal-body');
                modalBody.innerHTML = ''; // Clear previous content
                data.forEach(item => {
                    modalBody.innerHTML += `
                        <div>Product Name: ${item.PRODUCT_NAME}</div>
                        <div>Amount: ${item.AMOUNT}</div>
                        <div>Price: ${item.PRICE}</div>
                        <div>Tax: ${item.TAX}</div>
                    `;
                });
                openModal(modal);
            })
            .catch(error => console.error('Error fetching order item data:', error));
    });
});


<?php
require_once "../config/config.php";

if(isset($_GET['orderId'])) {
    $orderId = $_GET['orderId'];
    $sql = 'SELECT oi.*, p.PRODUCT_NAME 
            FROM ORDER_ITEM oi 
            JOIN PRODUCTS p ON oi.PRODUCT_CODE = p.CODE 
            WHERE ORDER_CODE = :order_id';
    $stmt = Connection::getConnection()->prepare($sql);
    $stmt->bindParam(':order_id', $orderId);
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    echo json_encode($result);
} else {
    echo json_encode([]);
}
?>